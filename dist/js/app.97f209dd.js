(function(){"use strict";var e={6451:function(e,t,s){var i=s(9242),l=s(3396),n=s(7139);const c={class:"__select__wrap"},o={class:"__select__header"},a=["name"],r={key:0,class:"__select__inner"},d={class:"__select__actions"},_={class:"__select"},h=["onInput","id","value"],u=["for"],f={class:"__select__footer"},p=["name"];function m(e,t,s,m,v,y){return(0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("div",o,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>v.selected=e),onClick:t[1]||(t[1]=e=>v.isSearch=!v.isSearch),type:"text",name:v.field,class:"__select__text __select__selected"},null,8,a),[[i.nr,v.selected]]),(0,l._)("button",{onClick:t[2]||(t[2]=(0,i.iM)(((...e)=>y.removeSelectItems&&y.removeSelectItems(...e)),["prevent"])),class:"__select__btn __select__clear"}," x ")]),v.isSearch?((0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",d,[(0,l._)("a",{onClick:t[3]||(t[3]=(...e)=>y.selectAll&&y.selectAll(...e)),href:"#",class:"__select__link"},"Select all"),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>v.searched=e),type:"text",class:"__select__text __select__search",placeholder:"search"},null,512),[[i.nr,v.searched]])]),(0,l._)("div",_,[(0,l._)("div",{onScroll:t[5]||(t[5]=(...e)=>y.scrollUpdateData&&y.scrollUpdateData(...e)),class:"__select__content"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.filteredItemList(),((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"__select__option",key:e},[(0,l._)("input",{onInput:t=>y.select(e),id:`option_${this.field}-${t}`,class:(0,n.C_)(`__select__input option__${this.field}`),type:"checkbox",name:"items[]",value:e.title},null,42,h),(0,l._)("label",{for:`option_${this.field}-${t}`,class:"__select__label"},(0,n.zw)(e.title),9,u)])))),128))],32)]),(0,l._)("div",f,[(0,l._)("button",{class:"__btn __btn__apply",name:v.applyName},"Apply",8,p)])])):(0,l.kq)("",!0)])}s(6699);var v={mounted:async function(){this.url=this.$options.dataset.url,this.field=this.$options.dataset.field,this.applyName=this.$options.dataset.applyName,await this.loadData();const e=this.$options.dataset.selected.slice(1,-1).split(", ");e.length&&""!=e[0]&&(this.selectedItemList=this.itemList.filter((t=>e.find((e=>t.id==e)))))},data(){return{applyName:"",field:"",url:"",selected:"",searched:"",isSearch:!1,itemList:[],selectedItemList:[],offset:0,total:0}},methods:{select(e){this.selectedItemList.find((t=>t===e))?this.selectedItemList=this.selectedItemList.filter((t=>t!==e)):this.selectedItemList=this.itemList.filter((t=>t===e||this.selectedItemList.find((e=>e===t))))},selectAll(){this.selectedItemList=this.itemList.map((e=>e)),this.changeCheckbox(!0)},removeSelectItems(){this.selectedItemList=[],this.changeCheckbox(!1)},changeCheckbox(e){const t=document.querySelectorAll(`.option__${this.field}`);t.forEach((t=>t.checked=e))},filteredItemList(){const e=this.itemList.filter((e=>e.title.toLowerCase().includes(this.searched.toLowerCase())));return this.$nextTick((()=>{const e=document.querySelectorAll(`.option__${this.field}`);e.forEach((e=>{this.selectedItemList.find((t=>t.title===e.value))&&(e.checked=!0)}))})),e},scrollUpdateData(e){e.target.scrollHeight===e.target.scrollTop+e.target.clientHeight&&this.offset<=this.total&&this.loadData()},async loadData(){const e=new FormData;e.append("limit",50),e.append("offset",this.offset);const t=await fetch(`${this.url}`,{method:"post",headers:{Authorization:"Bearer BT3HK2NpCnyrKiDo"},body:e}),s=await t.json();this.itemList=this.itemList.concat(s.message.data),this.offset+=50,this.total=s.message.total}},watch:{selectedItemList:{handler(){const e=this.selectedItemList.map((e=>e.title));this.selected=e.join(" ")},deep:!0}}},y=s(89);const b=(0,y.Z)(v,[["render",m],["__scopeId","data-v-17fac819"]]);var g=b;const w=document.querySelectorAll(".filter");w.forEach((e=>{const t=(0,i.ri)({...g,dataset:{...e.dataset}});t.mount(e)}))}},t={};function s(i){var l=t[i];if(void 0!==l)return l.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,i,l,n){if(!i){var c=1/0;for(d=0;d<e.length;d++){i=e[d][0],l=e[d][1],n=e[d][2];for(var o=!0,a=0;a<i.length;a++)(!1&n||c>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[a])}))?i.splice(a--,1):(o=!1,n<c&&(c=n));if(o){e.splice(d--,1);var r=l();void 0!==r&&(t=r)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,l,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,n,c=i[0],o=i[1],a=i[2],r=0;if(c.some((function(t){return 0!==e[t]}))){for(l in o)s.o(o,l)&&(s.m[l]=o[l]);if(a)var d=a(s)}for(t&&t(i);r<c.length;r++)n=c[r],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},i=self["webpackChunkvue_widget"]=self["webpackChunkvue_widget"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(6451)}));i=s.O(i)})();
//# sourceMappingURL=app.97f209dd.js.map